{"title":"Hypothetical Model","markdown":{"yaml":{"title":"Hypothetical Model"},"headingText":"คำอธิบายข้อมูล","containsRefs":false,"markdown":"\n\nขอให้นิสิตใช้ไฟล์ข้อมูล hsb.sav และ hsb2.sav สำหรับวิเคราะห์เพื่อตอบคำถามวิจัยต่อไปนี้\n\n```{r}\nlibrary(haven)\nlibrary(dplyr)\nhsb2<-read_spss(\"/Users/siwachoat/Library/CloudStorage/OneDrive-ChulalongkornUniversity/Documents/MSEM/MSEM/datasets/hsb2.sav\")\nglimpse(hsb2, width=80)\n```\n\n\n-   size คือ จำนวนนักเรียนภายในโรงเรียน\n\n-   sector คือ ประเภทของโรงเรียน (เหมือน hsb.sav)\n\n-   pracad คือ สัดส่วนของนักเรียนในโรงเรียนที่เรียนสายสามัญ\n\n-   disclim คือ คะแนนบรรยากาศความมีวิจัยในโรงเรียน\n\n-   himnty คือ ตัวแปรดัมมี่ (1 = มีชนกลุ่มน้อยในโรงเรียนมากกว่าร้อยละ 40, 0 = น้อยกว่าร้อยละ 40)\n\n-   meanses คือ ค่าเฉลี่ยของคะแนนเศรษฐานะระดับโรงเรียน\n\n## คำถามวิจัย\n\n1.  ผลสัมฤทธิ์ทางการเรียนโดยเฉลี่ยระดับโรงเรียนมีความแตกต่างกันระหว่างสังกัด (sector) อย่างไร\n2.  อิทธิพลของเศรษฐานะของครอบครัวนักเรียนที่มีต่อผลสัมฤทธิ์ทางการเรียนวิชาคณิตศาสตร์ของนักเรียน มีความแตกต่างกันอย่างไร ตามประเภทของโรงเรียน (sector) และสัดส่วนชนกลุ่มน้อยในโรงเรียน (himnty)\n\n## modelling\n\nstudent-level model\n\n$mathach_{ij} = \\beta_{0j} + \\beta_{1j}SES_{ij} + e_{ij}$\n\nschool-level model\n\n$\\beta_{0j} = \\gamma_{00} + \\gamma_{01}Sector_j + u_{0j}$\n\n$\\beta_{1j} = \\gamma_{10} + \\gamma_{11}Sector_j + \\gamma_{12}Himnty_j + u_{1j}$\n\nCombined-model\n\n$mathach_{ij} = \\gamma_{00} + \\gamma_{01}Sector_j + u_{0j} + ( \\gamma_{10} + \\gamma_{11}Sector_j + \\gamma_{12}Himnty_j + u_{1j})SES_{ij} + e_{ij}$\n\n$mathach_{ij} = \\gamma_{00} + \\gamma_{01}Sector_j + u_{0j} + \\gamma_{10}SES_{ij} + \\gamma_{11}Sector_jSES_{ij} + \\gamma_{12}Himnty_jSES_{ij} + u_{1j}SES_{ij} + e_{ij}$\n\n$mathach_{ij} = \\gamma_{00} + \\gamma_{01}Sector_j + \\gamma_{10}SES_{ij} + \\gamma_{11}Sector_jSES_{ij} + \\gamma_{12}Himnty_jSES_{ij} + u_{0j}+u_{1j}SES_{ij} + e_{ij}$\n\n```{r}\nlibrary(dplyr)\nlibrary(haven)\n# student level data\ndat<-read_spss(\"datasets/HSB.SAV\")\nglimpse(dat)\nsummary(dat)\n# school level data\ndat2<-read_spss(\"/Users/siwachoat/Library/CloudStorage/OneDrive-ChulalongkornUniversity/Documents/MSEM/MSEM/datasets/hsb2.sav\")\nhead(dat2)\n\n## merging data\nmerge.dat <- merge(dat, dat2, by.x = \"schid\", by.y =\"schoolid\")\nhead(merge.dat)\n\nmerge.dat <- merge.dat %>%\n  select(-sector.x)\n\nnames(merge.dat)[5]<-\"sector\"\n\n# modeling\nlibrary(lme4)\nfit<-lmer(mathach ~ 1+sector+ses+sector*ses+himnty*ses + (1 + ses | schid), \n          data= merge.dat)\nsummary(fit)\n```\n\n![](images/image-984491753.png){width=\"255\"}\n\n$\\gamma_{00} = 12.23$ คือ ค่าเฉลี่ย mathach ของนักเรียนที่มีฐานะปานกลาง ในโรงเรียนรัฐ\n\nค่าเฉลี่ย mathach ของนักเรียนที่มีฐานะปานกลางในโรงเรียน car เท่ากับ 12.23 + 2.2349 $=\\gamma_{00} + \\gamma_{01}(1)$\n\n$\\beta_{1j}$ คืออัตราการเปลี่ยนของ mathach เมื่อเทียบกับ ses ของโรงเรียนที่ j\n\n$\\gamma_{10} = 3.06$ คือ ค่าเฉลี่ยของอัตราการเปลี่ยนของ mathach เมื่อเทียบกับ ses ของนักเรียนในโรงเรียนรัฐที่มีนักเรียนต่างชาติเป็นส่วนน้อย\n\nค่าเฉลี่ยของอัตราการเปลี่ยนของ mathach เมื่อเทียบกับ ses ของนักเรียนในโรงเรียน car เท่ากับ 3.06 - 1.27 = 1.79 เมื่อควบคุมให้ปัจจัยจำนวนนักเรียนต่างชาติในโรงเรียนคงที่\n\n$\\beta_{0j}$ คือค่าเฉลี่ย mathach ของนักเรียนที่มีฐานะปานกลางในโรงเรียน j\n\n```{r}\nlibrary(lmerTest)\ncoef(fit)\nranova(fit)\n```\n\n### centering\n\n```{r}\nfit<-lmer(mathach ~ 1+ses + (1 + ses | schid), \n          data= merge.dat)\nsummary(fit)\n```\n\n#### type 1\n\nstudent-level model\n\n$mathach_{ij} = \\beta_{0j} + \\beta_{1j}SES_{ij} + e_{ij}$\n\nschool-level model\n\n$\\beta_{0j} = \\gamma_{00} +  u_{0j}$\n\n$\\beta_{1j} = \\gamma_{10} + u_{1j}$\n\n$\\gamma_{00} = 12.66$ ค่าเฉลี่นย mathach ของนักเรียนที่มีฐานะปานกลาง ในโรงเรียน j\n\n$\\beta_{0j}$ ค่าเฉลี่ย mathach ของนักเรียนที่มีฐานะอยู่ในระดับปานกลางของประเทศ ในโรงเรียนที่ j\n\n#### type2 : centering SES ด้วย group means\n\nstudent-level model\n\n$mathach_{ij} = \\beta_{0j} + \\beta_{1j}(SES_{ij}-\\overline{SES}_{.j}) + e_{ij}$\n\nschool-level model\n\n$\\beta_{0j} = \\gamma_{00} +  u_{0j}$\n\n$\\beta_{1j} = \\gamma_{10} + u_{1j}$\n\nintercepe ==\\> $\\beta_{0j}$ \\<\\-- ค่าของ y เมื่อ x เป็น 0 ---\\> ค่าเฉลี่ยของ mathach เมื่อ centering term เป็น 0\n\n$\\beta_{0j}$ ค่าเฉลี่ย mathach ของนักเรียนที่มีฐานะปานกลางของโรงเรียนที่ j\n\n#### type3 : centering SES ด้วย grand means\n\nstudent-level model\n\n$mathach_{ij} = \\beta_{0j} + \\beta_{1j}(SES_{ij}-\\overline{SES}_{..}) + e_{ij}$\n\nschool-level model\n\n$\\beta_{0j} = \\gamma_{00} +  u_{0j}$\n\n$\\beta_{1j} = \\gamma_{10} + u_{1j}$\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"output-file":"08HypotheticalModel.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.269","editor":"visual","urlcolor":"steelblue","linkcolor":"steelblue","theme":{"light":["pandoc","../theme.scss"]},"mainfont":"K2D","code-copy":true,"title":"Hypothetical Model"},"extensions":{"book":{"multiFile":true}}}}}