---
title: "Basic Classification Example"
subtitle: "<b>Practical Insight: Doing Data Science in Education with R</b>"
author: ผศ.ดร.สิวะโชติ ศรีสุทธิยากร
logo: "images/logo.png"
footer: "[Practical Insight: Doing Data Science in Education with R](https://datakruroo.netlify.app/practical_insight/_site/)"
format: 
  html:
    number_sections: true
editor: visual
execute:
  freeze: auto
---


## สถานการณ์

นักวิเคราะห์ต้องการทำนายเงินเดือนของอาจารย์มหาวิทยาลัย ด้วยตัวแปรทำนายได้แก่ เพศ ตำแหน่งทางวิชาการ สาขาวิชา ประสบการณ์ในการเป็นอาจารย์ และประสบการณ์ทำงานตั้งแต่จบปริญญาเอก โดยตัวแปรตามคือเงินเดือนของอาจารย์มหาวิทยาลัยที่ต้องการวิเคราะห์เป็นตัวแปรจัดประเภทที่มี 2 กลุ่ม กลุ่มแรกเป็นอาจารย์รายได้สูง (ตั้งแต่ 90,000 บาทขึ้นไป) และกลุ่มอาจารย์รายได้ปกติ


## การประเมินประสิทธิภาพของ classification model

### Confusion matrix

![](https://datakruroo.netlify.app/mlcourse/_site/documents/images/image-753775251.png){width=40%}

confusion matrix เป็นเครื่องมือสำหรับที่ใช้ประเมินประสิทธิภาพการทำนายของโมเดลประเภท classification models รูปด้านล่างแสดงการเปรียบเทียบ confusion matrix ระหว่าง logistic regression model กับ random forest model ผู้อ่านคิดว่าโมเดลใดมีแนวโน้มจะมีประสิทธิภาพในการทำนายสูงกว่ากัน


![](https://datakruroo.netlify.app/mlcourse/_site/documents/images/image-235695373.png){width=70%}

### Accuracy

บาง package อาจเรียว่า balance accuracy ดัชนีตัวนี้เป็นค่าบ่งชี้ความแม่นยำในการทำนายโดยตรงของโมเดลโดยมีค่าเท่ากับสัดส่วนของเคสที่ทำนายถูกทั้งหมดเทียบกับเคสทั้งหมดที่ทำนาย ดังนี้

$$
\text{Accuracy} = \frac{\text{TP} + \text{TN}}{\text{TP} + \text{TN} + \text{FP} + \text{FN}}
$$


### Sensitivity & Specificity

sensitivity และ specificity เป็นค่าบ่งชี้ความแม่นยำในการทำนายโดยตรงของโมเดล โดยมีค่าเท่ากับสัดส่วนของเคสที่ทำนายถูกทั้งหมดเทียบกับเคสที่เป็น positive และ negative ตามลำดับ ดังนี้

$$
\text{Sensitivity} = \frac{\text{TP}}{\text{TP} + \text{FN}}
$$

$$
\text{Specificity} = \frac{\text{TN}}{\text{TN} + \text{FP}}
$$

### Recall


$$
\text{Recall} = \frac{\text{TP}}{\text{TP} + \text{FN}}
$$

### Precision


$$
\text{Precision} = \frac{\text{TP}}{\text{TP} + \text{FP}}
$$

### F1-score

$$
\text{F1-score} = 2 \times \frac{\text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}
$$


## การพัฒนา Classification Model

```{r}
library(readr)
dat <- read_csv("TeacherSalaryData.csv")
head(dat)
```

เป็นแบบฝึกหัดให้ผู้เรียน