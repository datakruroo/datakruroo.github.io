{
  "hash": "b6f167ea94c7bbc4d6c51811812edea4",
  "result": {
    "markdown": "---\ntitle: \"Educational Data Science\"\nlisting:\n  contents: posts\n  sort: \"date desc\"\n  type: table\n  categories: true\n  sort-ui: true\n  filter-ui: true\npage-layout: full\ntitle-block-banner: true\n---\n\n\nบทความนี้มีเนื้อหาเกี่ยวกับการวิเคราะห์ภาวะการถดถอยการเรียนรู้ของนักเรียนไทย ขอบเขตการศึกษาเป็นนักเรียนระดับชั้นประถมศึกษาปีที่ 6 ที่เรียนอยู่ในโรงเรียนสังกัดคณะกรรมการการศึกษาขั้นพื้นฐาน โดยข้อมูลที่ใช้จะเป็นข้อมูลระดับโรงเรียน ในช่วงปีการศึกษา 2561 - 2564 มีชุดข้อมูลที่เกี่ยวข้องดังนี้\n\n1.  ฐานข้อมูลผลการสอบ O-NET\n2.  ฐานข้อมูลภูมิหลังผู้สอบ O-NET --- รายได้ครอบครัว สถานะครอบครัว\n3.  ฐานข้อมูลพื้นฐานโรงเรียน สพฐ. --- จำนวนครู จำนวนห้องเรียน จำนวนนักเรียน ขนาดโรงเรียน ในเขตนอกเขตเทศบาล\n4.  ฐานข้อมูลประกันคุณภาพโรงเรียนภายนอก โดย สมศ. รอบ 3 และ 4\n\n# Literature Review\n\n## Piecewise Regression Analysis\n\nการวิเคราะห์การถดถอยแบบ Piecewise (หนังสือบางเล่มอาจเรียกว่า segmentd regression) เป็นการวิเคราะห์ความสัมพันธ์ระหว่างตัวแปรตามกับตัวแปรอิสระ โดยที่ความสัมพันธ์ดังกล่าวมีการเปลี่ยนแปลง ณ จุดเปลี่ยน (breakpoint) ทำให้การคำนวณสัมประสิทธิ์การถดถอยภายในชุดข้อมูลมีการเปลี่ยนแปลง วิธีการวิเคราะห์นี้เหมาะสำหรับการวิเคราะห์ single case study ที่ต้องการวิเคราะห์แนวโน้มการเปลี่ยนแปลงของหน่วยข้อมูลตามเวลา\n\nA general model for single-case data based on the piecewise regression approach has been proposed by Huitema and McKean Huitema & Mckean ([2000](https://jazznbass.github.io/scan-Book/references.html#ref-huitema_design_2000)). They refer to two-phase single-case designs with a pre-intervention phase containing some measurements before the start of the intervention (A-phase) and an intervention phase containing measurements starting at the beginning of the intervention and continuing throughout intervention (B-phase).\n\nภายใต้โมเดลประกอบด้วยพารามิเตอร์ 4 ตัว ได้แก่\n\n-   intercept ใช้แทนคะแนนของตัวแปรตามเมื่อเริ่มศึกษา\n\n-   trend effect หรือแนวโน้มโดยรวมของตัวแปรตาม\n\n-   level effect เป็น intervention effect ที่ทำให้เกิดการเปลี่ยนแปลงอย่างฉับพลันต่อ intercept ระหว่างช่วง A กับ B\n\n-   slope effect เป็น intervention effect ที่ทำให้เกิดการเปลี่ยนแปลงอย่างฉับพลันต่อ slope ระหว่างช่วง A กับ B\n\n![](posts/2023-04-09-learningloss/Screenshot%202566-04-09%20at%2023.42.49.png){width=\"60%\"}\n\n*scan* provides an implementation based on this piecewise-regression approach. Though the original model is extended by several factors:\n\n-   multiple phase designs\n\n-   additional (control) variables\n\n-   autoregression modeling\n\n-   logistic, binomial, and poisson distributed dependent variables and error terms\n\n-   multivariate analyzes for analyzing the effect of an intervention on more than one outcome variable (see [Chapter 11](https://jazznbass.github.io/scan-Book/ch_multivariate_plm.html)).\n\n-   multilevel analyzes for multiple cases (see [Chapter 10](https://jazznbass.github.io/scan-Book/ch_multilevel_plm.html)).\n\n### The Basic `plm` function\n\nตัวอย่างต่อไปนี้จะแสดงการวิเคราะห์ piecewise regression ด้วยฟังก์ชัน `plm`\n\n``` R\nplm(data, dvar, pvar, mvar, AR = 0, model = c(“W”, “H-M”, “B&L-B”, “JW”), family = “gaussian”, trend = TRUE, level = TRUE, slope = TRUE, contrast = c(“first”, “preceding”), contrast_level = c(NA, “first”, “preceding”), contrast_slope = c(NA, “first”, “preceding”), formula = NULL, update = NULL, na.action = na.omit, r_squared = TRUE, var_trials = NULL, dvar_percentage = FALSE, …)\n```\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(lme4)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: Matrix\n```\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(scan)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\u001b[34mscan 0.57 (2023-02-24)\n\u001b[31mFor information on citing scan, type citation(\"scan\").\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'scan'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:dplyr':\n\n    combine\n```\n:::\n\n```{.r .cell-code}\ndata(\"sleepstudy\")\ndat <- sleepstudy\n\nggplot(data=dat,aes(x = Days, y = Reaction, group = Subject)) +\n  geom_line(aes(group=Subject))+\n  geom_text(data = dat%>%filter(Days ==9 , Reaction < 300), \n            aes(x = Days, y = Reaction,label = Subject))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n```{.r .cell-code}\nsingle <- dat %>%filter(Subject == 332)\nsingle\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Reaction Days Subject\n1  234.8606    0     332\n2  242.8118    1     332\n3  272.9613    2     332\n4  309.7688    3     332\n5  317.4629    4     332\n6  309.9976    5     332\n7  454.1619    6     332\n8  346.8311    7     332\n9  330.3003    8     332\n10 253.8644    9     332\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\ndmc<-read_excel(\"/Users/siwachoat/Library/CloudStorage/OneDrive-ChulalongkornUniversity/Documents/datakruroo/datakruroo.github.io/DSBlog/posts/2023-04-09-learningloss/DMC651.xlsx\")\n\ndat61<-read_excel(\"/Users/siwachoat/Library/CloudStorage/OneDrive-ChulalongkornUniversity/Documents/datakruroo/datakruroo.github.io/DSBlog/posts/2023-04-09-learningloss/dat61.xlsx\")\nglimpse(dat61, width=50)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lme4)\ndata(\"sleepstudy\")\ndat <- sleepstudy\nhead(dat)\n\nlibrary(ggplot2)\ndat %>% ggplot(aes(x = Days, y = Reaction)) +\n  geom_line(aes(group=Subject))\n\ndat %>% group_by(Days) %>%\n  count()\n\nlibrary(lme4)\nlibrary(nlme)\n# Fit a multilevel piecewise regression model with random intercepts\nmodel <- lmer(Reaction ~ Days + (1|Subject), data = dat)\nsummary(model)\n\nlme(Reaction ~ Days, random = ~1|Subject, data = dat) %>% summary()\n\nlibrary(piecewiseSEM)\n\n# Fit a multilevel piecewise regression model with random intercepts and slopes\nmodel <- psem(\n        lme(Reaction ~ Days, random = ~1|Subject, data = dat),\n        data = dat)\nsummary(model)\nplot(model)\nrsquared(model)\nresiduals(model)\ncoefs(model)\n\nlibrary(brms)\n\nmodel <- brm(Reaction ~ Days + (1|Subject), data = dat)\nsummary(model)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(scan)\nhplm(data = dat,\n     dvar = \"Reaction\",\n     )\n```\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}