---
title: "Diagnostic Analytics"
subtitle: "Why did this happen?"
author: "ผศ.ดร.สิวะโชติ ศรีสุทธิยากร"
institute: "ภาควิชาวิจัยและจิตวิทยาการศึกษา <br> คณะครุศาสตร์ จุฬาลงกรณ์มหาวิทยาลัย"
date: 2024-09-23
format:
  revealjs:
    code-fold: false
    slide-number: c/t
    footer: "2758501 สถิติและสารสนเทศทางการศึกษา <br>
            ผศ.ดร.สิวะโชติ ศรีสุทธิยากร"
    logo: https://github.com/ssiwacho/picture/blob/main/datakruroo.png?raw=true
    theme: theme.scss
    css: my_css.css
    scrollable: true
    transition: fade
    background-transition: fade
    highlight-style: github
    title-slide-attributes:
      data-background-image: https://d2jx2rerrg6sh3.cloudfront.net/image-handler/ts/20221007084404/ri/1000/src/images/Article_Images/ImageForArticle_23176_16651466437256686.jpg
      data-background-opacity: 20%
      data-background-size: full
code-link: true
execute:
  echo: true
  freeze: auto
  progress: true
---

## Sample Dataset

```{r echo = F}
library(tidyverse)
data <- read_csv("/Users/choat/Downloads/learning_data2.csv")
data <- data |> mutate(student_id = 1:dim(data)[1], .before = "choose_method")
glimpse(data |> select(research_score, everything()), 60)
```



# Outline

- Basic Concept of Diagnostic Analytics

- Diagnostics Analytics Techniques

# Basic Concept


## What's Diagnostic Analysis? {.smaller}

- Diagnostic Analytics is **the process of using data** to determine **the causes of trends and correlations between variables**.

- Logical next step after using descriptive analytics.





## Diagnostic Analysis in Classroom {.smaller}

หมายถึงการตรวจสอบเพื่อระบุสาเหตุของปัญหาหรือการเกิดสถานการณ์ต่าง ๆ 

- ทางการแพทย์ หมายถึงกระบวนการหรือวิธีการตรวจหาสาเหตุของโรค/สุขภาพ

- การศึกษา หมายถึงการวิเคราะห์ข้อมูลเพื่อระบุปัญหาหรือสถานะของผู้เรียน





```{r}
library(patchwork)
p1 <- data |> 
  ggplot(aes(x = research_score))+
  geom_histogram(bins = 15, col ="white", fill = "steelblue")

p2 <- data |> 
  mutate(interval_res = cut(research_score, include.lowest = TRUE,
        right = F, breaks=c(0,55,60,65,70,75,80,85,100),
        labels = c("F","D","D+","C","C+","B","B+","A"))) |> 
  ggplot(aes(x = interval_res))+
  geom_bar(aes(fill = interval_res %in% c("F","D") ))

p2
```



```{r}
data |>   mutate(interval_res = cut(research_score, include.lowest = TRUE,
        right = F, breaks=c(0,55,60,65,70,75,80,85,100),
        labels = c("F","D","D+","C","C+","B","B+","A"))) |> 
          group_by(interval_res %in% c("F","D")) |> 
          summarise_if(is.numeric, mean, na.rm = T) |> 
          select(-student_id) |> 
          pivot_longer(cols = -1) |> 
          arrange(name)

```



```{r}
min_max<- function(x)
{
  y<-(x-0)/(max(x,na.rm = T))
  return(y)
}


data |> 
 # filter(research_score < 55) |> 
  select(-student_id, -gender, -department) |> 
  cor(use = "complete.obs") |> 
  data.frame() |> select(research_score)  |> 
  rownames_to_column("name") |> 
  right_join(
    data |> select(-research_score, -student_id, -gender, -department) |> 
      mutate_all(min_max) |> 
  pivot_longer(cols = everything()) |>
  group_by(name) |>
  summarise(median = median(value, na.rm = T)), by = "name" ) |> 
  ggplot(aes(x = research_score, y=median))+
  geom_point()+
  geom_vline(xintercept =c(0, 0.3), linetype = 3)+
  geom_text(aes(label = name))+
  xlim(-0.2,1)+
  ylim(0,1)+
  xlab("Importance")
```